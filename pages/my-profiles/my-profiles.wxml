<!--pages/my-profiles/my-profiles.wxml-->
<view class="container">
  <!-- å¤´éƒ¨ç»Ÿè®¡ -->
  <view class="header-stats">
    <view class="stat-item">
      <text class="stat-number">{{totalProfiles}}</text>
      <text class="stat-label">æˆ‘çš„æ¡£æ¡ˆ</text>
    </view>
    <view class="stat-item">
      <text class="stat-number">{{waitingProfiles}}</text>
      <text class="stat-label">ç­‰å¾…é¢†å…»</text>
    </view>
    <view class="stat-item">
      <text class="stat-number">{{adoptedProfiles}}</text>
      <text class="stat-label">å·²è¢«é¢†å…»</text>
    </view>
  </view>

  <!-- åˆ›å»ºæ–°æ¡£æ¡ˆæŒ‰é’® -->
  <view class="create-button" bindtap="createNewProfile">
    <view class="create-icon">+</view>
    <text class="create-text">åˆ›å»ºæ–°æ¡£æ¡ˆ</text>
  </view>

  <!-- æ¡£æ¡ˆåˆ—è¡¨ -->
  <view class="profiles-section" wx:if="{{!loading && myProfiles.length > 0}}">
    <view class="section-title">æˆ‘çš„æ¡£æ¡ˆåˆ—è¡¨</view>
    <view class="profile-list">
      <view class="profile-card" wx:for="{{myProfiles}}" wx:key="id" data-id="{{item.id}}" bindtap="viewProfile">
        <!-- æ¡£æ¡ˆç…§ç‰‡ -->
        <view class="profile-image">
          <image src="{{item.photos[0] || '/images/default-animal.jpg'}}" mode="aspectFill" class="animal-photo" />
          <view class="status-badge status-{{item.currentStatus}}">{{item.currentStatus}}</view>
        </view>
        
        <!-- æ¡£æ¡ˆä¿¡æ¯ -->
        <view class="profile-info">
          <view class="profile-header">
            <text class="profile-name">{{item.name}}</text>
            <text class="profile-id">{{item.id}}</text>
          </view>
          
          <view class="profile-details">
            <view class="detail-row">
              <text class="detail-label">ç§ç±»ï¼š</text>
              <text class="detail-value">{{item.type}} Â· {{item.breed}}</text>
            </view>
            <view class="detail-row">
              <text class="detail-label">æ€§åˆ«ï¼š</text>
              <text class="detail-value">{{item.gender}} Â· {{item.ageEstimate}}</text>
            </view>
            <view class="detail-row">
              <text class="detail-label">æ•‘åŠ©æ—¥æœŸï¼š</text>
              <text class="detail-value">{{item.rescueDate}}</text>
            </view>
            <view class="detail-row">
              <text class="detail-label">å¥åº·çŠ¶å†µï¼š</text>
              <text class="detail-value health-{{item.healthStatus}}">{{item.healthStatus}}</text>
            </view>
          </view>
          
          <view class="profile-actions">
            <button class="action-btn edit-btn" data-id="{{item.id}}" bindtap="editProfile" catchtap="editProfile">
              ç¼–è¾‘
            </button>
            <button class="action-btn delete-btn" data-id="{{item.id}}" data-name="{{item.name}}" bindtap="confirmDelete" catchtap="confirmDelete">
              åˆ é™¤
            </button>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:if="{{!loading && myProfiles.length === 0}}">
    <view class="empty-icon">ğŸ“‹</view>
    <text class="empty-title">è¿˜æ²¡æœ‰æ¡£æ¡ˆ</text>
    <text class="empty-subtitle">åˆ›å»ºä½ çš„ç¬¬ä¸€ä¸ªåŠ¨ç‰©æ¡£æ¡ˆå§</text>
    <button class="empty-btn" bindtap="createNewProfile">ç«‹å³åˆ›å»º</button>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-state" wx:if="{{loading}}">
    <view class="loading-spinner"></view>
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>
</view>

<!-- åˆ é™¤ç¡®è®¤æ¨¡æ€æ¡† -->
<view class="modal-overlay" wx:if="{{showDeleteModal}}">
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">ç¡®è®¤åˆ é™¤</text>
    </view>
    <view class="modal-body">
      <text class="modal-text">ç¡®å®šè¦åˆ é™¤æ¡£æ¡ˆ"{{deleteProfileName}}"å—ï¼Ÿ</text>
      <text class="modal-warning">æ­¤æ“ä½œä¸å¯æ¢å¤</text>
    </view>
    <view class="modal-actions">
      <button class="modal-btn cancel-btn" bindtap="cancelDelete">å–æ¶ˆ</button>
      <button class="modal-btn confirm-btn" bindtap="confirmDeleteProfile">ç¡®è®¤åˆ é™¤</button>
    </view>
  </view>
</view>